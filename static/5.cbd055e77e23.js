webpackJsonp([5],{3:function(e,t){var o=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=o)},4:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{leftOptions:{type:Object,"default":function(){return{showBack:!0,backText:"Back",preventGoBack:!1}}},rightOptions:{type:Object,"default":function(){return{showMore:!1}}}},methods:{onClickBack:function(){this.leftOptions.preventGoBack?this.$emit("on-click-back"):history.back()}}}},5:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,'.vux-header{position:relative;padding:3px 0;box-sizing:border-box;background-color:#fff}.vux-header .vux-header-title,.vux-header h1{margin:0 88px;margin-left:100px;line-height:40px;text-align:center;height:40px;font-size:18px;font-weight:400;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#000}.vux-header .vux-header-title a,.vux-header .vux-header-title a:active,.vux-header h1 a,.vux-header h1 a:active{color:#fff}.vux-header .vux-header-left,.vux-header .vux-header-right{position:absolute;top:14px;display:block;font-size:14px;line-height:21px;color:#ccc}.vux-header .vux-header-left a,.vux-header .vux-header-left button,.vux-header .vux-header-right a,.vux-header .vux-header-right button{float:left;margin-right:8px;color:#000}.vux-header .vux-header-left a:active,.vux-header .vux-header-left button:active,.vux-header .vux-header-right a:active,.vux-header .vux-header-right button:active{opacity:.5}.vux-header .vux-header-left{left:18px}.vux-header .vux-header-left .vux-header-back{padding-left:16px}.vux-header .vux-header-left .vux-header-back:before{content:"";position:absolute;display:block;top:2px;left:0;width:12px;height:12px;border:1px solid #000;border-width:1px 0 0 1px;margin-left:3px;margin-top:1px;-webkit-transform:rotate(315deg);transform:rotate(315deg)}.vux-header .vux-header-right{right:15px}.vux-header .vux-header-right a,.vux-header .vux-header-right button{margin-left:8px;margin-right:0}.vux-header .vux-header-right .vux-header-more:after{content:"\\2022   \\2022   \\2022   ";font-size:16px}',""])},6:function(e,t,o){var a=o(5);"string"==typeof a&&(a=[[e.id,a,""]]);o(2)(a,{});a.locals&&(e.exports=a.locals)},7:function(e,t){e.exports=" <div class=vux-header> <div class=vux-header-left> <a class=vux-header-back @click.preventdefault v-show=leftOptions.showBack @click=onClickBack>{{leftOptions.backText}}</a> <slot name=left></slot> </div> <h1 class=vux-header-title><slot></slot></h1> <div class=vux-header-right> <a class=vux-header-more @click.preventdefault @click=\"$emit('on-click-more')\" v-if=rightOptions.showMore></a> <slot name=right></slot> </div> </div> "},8:function(e,t,o){var a,i;o(6),a=o(4),i=o(7),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},11:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{show:{type:Boolean,"default":!1},text:{type:String,"default":"加载中..."}}}},13:function(e,t){e.exports=' <div id=loadingToast class=weui_loading_toast v-show=show> <div class=weui_mask_transparent></div> <div class=weui_toast> <div class=weui_loading> <div class=weui_loading_leaf v-for="i in 12" :class="[\'weui_loading_leaf_\' + i]"></div> </div> <p class=weui_toast_content>{{text}}<slot></slot></p> </div> </div> '},14:function(e,t,o){var a,i;a=o(11),i=o(13),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},15:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{type:{"default":"default"},disabled:{type:Boolean,"default":!1},mini:{type:Boolean,"default":!1},plain:{type:Boolean,"default":!1},text:String},computed:{classes:function(){return[{weui_btn_disabled:this.disabled,weui_btn_mini:this.mini},"weui_btn_"+this.type,this.plain?"weui_btn_plain_"+this.type:""]}}}},18:function(e,t){e.exports=" <button class=weui_btn :class=classes :disabled=disabled> {{text}}<slot></slot> </button> "},19:function(e,t,o){var a,i;a=o(15),i=o(18),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},21:function(e,t,o){e.exports={"default":o(24),__esModule:!0}},24:function(e,t,o){var a=o(3),i=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},27:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{show:{type:Boolean,"default":!1},time:{type:Number,"default":2e3},type:{type:String,"default":"success"},transition:{type:String,"default":"vux-fade"},width:{type:String,"default":"7.6em"}},computed:{toastClass:function(){return{weui_toast_forbidden:"warn"===this.type,weui_toast_cancel:"cancel"===this.type,weui_toast_success:"success"===this.type,weui_toast_text:"text"===this.type}}},watch:{show:function(e){var t=this;e&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.show=!1},this.time))}}}},30:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,'.weui_toast{z-index:200;-webkit-transform:translateX(-50%);transform:translateX(-50%);margin-left:0}.weui_toast_forbidden{color:#f76260}.weui_toast.weui_toast_text{min-height:0}.weui_toast_text .weui_toast_content{margin:0;padding-top:10px;padding-bottom:10px;border-radius:15px}.weui_toast_success .weui_icon_toast:before{content:"\\EA08"}.weui_toast_cancel .weui_icon_toast:before{content:"\\EA0D"}.weui_toast_forbidden .weui_icon_toast:before{content:"\\EA0B";color:#f76260}',""])},31:function(e,t,o){var a=o(30);"string"==typeof a&&(a=[[e.id,a,""]]);o(2)(a,{});a.locals&&(e.exports=a.locals)},32:function(e,t){e.exports=' <div v-show=show class=vux-toast :transition=transition> <div class=weui_mask_transparent></div> <div class=weui_toast :style="{width: width}" :class=toastClass> <i class=weui_icon_toast v-show="type !== \'text\'"></i> <p class=weui_toast_content><slot></slot></p> </div> </div> '},33:function(e,t,o){var a,i;o(31),a=o(27),i=o(32),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},37:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{show:{type:Boolean,required:!0,"default":!1,twoWay:!0},showCancel:{type:Boolean,"default":!1},cancelText:{type:String,"default":"取消"},menus:{type:Object,"default":{}}},methods:{emitEvent:function(e,t){"on-click-menu"!==e||/.noop/.test(t)||(this.$emit(e,t),this.$emit(e+"-"+t),this.show=!1)}}}},40:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".vux-actionsheet-gap{height:8px;width:100%;background-color:#eee}.vux-actionsheet-cancel:before{border-top:none}",""])},41:function(e,t,o){var a=o(40);"string"==typeof a&&(a=[[e.id,a,""]]);o(2)(a,{});a.locals&&(e.exports=a.locals)},42:function(e,t){e.exports=' <div> <div class=weui_mask_transition :class="{\'weui_fade_toggle\': show}" :style="{display: show ? \'block\' : \'none\'}" @click="show=false"></div> <div class=weui_actionsheet :class="{\'weui_actionsheet_toggle\': show}"> <div class=weui_actionsheet_menu> <div class=weui_actionsheet_cell v-for="(key, text) in menus" @click="emitEvent(\'on-click-menu\', key)" v-html=text> </div> <div class=vux-actionsheet-gap v-if=showCancel></div> <div class="weui_actionsheet_cell vux-actionsheet-cancel" @click="emitEvent(\'on-click-menu\', \'cancel\')" v-if=showCancel>{{cancelText}}</div> </div> </div> </div> '},43:function(e,t,o){var a,i;o(41),a=o(37),i=o(42),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},44:function(e,t,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,o,a,i,s){d["default"].log("onMenuShareAppMessage","title:"+t),wx&&wx.onMenuShareAppMessage({title:t,desc:o,link:e,imgUrl:a,success:function(){d["default"].log("onMenuShareAppMessage","success"),i&&i()},cancel:function(){s&&s()}})}function s(e,t,o,a,i,s){wx&&wx.onMenuShareTimeline({title:t,link:e,desc:o,imgUrl:a,success:function(){i&&i()},cancel:function(){s&&s()}})}function n(e,t,o){var a=p["default"].wxOpenId,n=p["default"].wxConfigStatus;if(!a||n)return d["default"].log("wxRegister","discarded, openid:"+a+", wxConfig status:"+n),void(t&&t());var r=location.href.split("#")[0];d["default"].log("wxRegister","register url:"+r),e.$http.post(l["default"].API_URL+"weixin/sign/jsapi",{url:r}).then(function(a){d["default"].log("wxRegister","jsapi response ok"),e.loading=!1,a&&a.data?(wx.config({debug:!1,appId:a.data.appId,timestamp:a.data.timestamp,nonceStr:a.data.nonceStr,signature:a.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","chooseImage","uploadImage","scanQRCode","openCard","addCard","chooseWXPay"]}),wx.ready(function(){d["default"].log("wxRegister","wx.config ok..."),p["default"].wxConfigEnable(),s(location.origin+location.pathname,l["default"].shareTitle,l["default"].shareDesc,l["default"].shareLogo),i(location.origin+location.pathname,l["default"].shareTitle,l["default"].shareDesc,l["default"].shareLogo),t&&t()}),wx.error(function(e){d["default"].log("wxRegister","wx config error:"+e.errMsg),o&&o()})):o&&o()},function(e){d["default"].err("wxRegister",e),o&&o()})}Object.defineProperty(t,"__esModule",{value:!0}),t.onMenuShareAppMessage=i,t.onMenuShareTimeline=s,t.wxRegister=n;var r=o(10),d=a(r),c=o(9),l=a(c),u=o(20),p=a(u)},161:function(e,t,o){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(21),s=a(i),n=o(9),r=a(n),d=o(20),c=a(d),l=o(10),u=a(l),p=o(44);t["default"]={components:{XHeader:o(8),Loading:o(14),Actionsheet:o(43),XButton:o(19),Toast:o(33)},data:function(){return{menus:{home:"首页",cards:"我的卡包"},showMenus:!1,cards:[],cards_online:[],no_data:!1,alert:{type:"",message:"",show:!1},loading:!1}},route:{data:function(e){this.openid=c["default"].wxOpenId}},ready:function(){var e=this;this.loading=!0,(0,p.wxRegister)(this,function(){e.$http.post(r["default"].API_URL+"cards",{openid:e.openid}).then(function(t){e.loading=!1,u["default"].log("PayCards","cards:"+(0,s["default"])(t));var o=t.data;o&&0==o.result&&(e.cards=o.data),0==e.cards.length&&(e.no_data=!0)},function(){e.loading=!1})},function(){e.loading=!1})},methods:{alertMsg:function(e,t){this.alert.type=e,this.alert.message=t,this.alert.show=!0},goBuy:function(){this.$route.router.go({name:"buy"})},cardConsume:function(e){var t=e.currentTarget.attributes,o=t["data-cardid"].value,a=t["data-cardcode"]&&t["data-cardcode"].value||0;return o?0==a?void this.alertMsg("warn","请先绑定微信会员卡"):(u["default"].log("PayCards","cardConsume, cardid:"+o+", code:"+a),void this.$route.router.go({name:"pay",params:{cardId:o,cardCode:a}})):void this.alertMsg("warn","请选择赠送的会员卡")},goPage:function(e){this.$route.router.replace({name:e})}}}},184:function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".wx-cards .wxcard-enable{color:grey}.wx-cards .wxcard-enable,.wx-cards .wxcard-invalid{margin-left:0!important;font-size:14px;text-align:right}.wx-cards .wxcard-invalid{color:#a9a9a9}.wx-cards .wxcard-disable{margin-left:0!important;color:red;font-size:14px;text-align:right}.wx-cards .title{margin-top:6px;color:#fff;font-size:18px;width:100%}.wx-cards .sub-title{color:#fff;font-size:12px;width:100%}.card .content{padding:5px 10px}",""])},200:function(e,t,o){var a=o(184);"string"==typeof a&&(a=[[e.id,a,""]]);o(2)(a,{});a.locals&&(e.exports=a.locals)},280:function(e,t){e.exports=' <div class=card> <x-header :left-options=\'{showBack:true, backText:"返回"}\' :right-options={showMore:true} @on-click-more="showMenus=true">支付 </x-header> <actionsheet :menus=menus :show.sync=showMenus show-cancel @on-click-menu-home="goPage(\'home\')" @on-click-menu-cards="goPage(\'memcards\')"></actionsheet> <div class=weui_cells_title v-show="cards.length>0">你共有<span style=color:#6A6AD6>{{cards.length}}</span>张礼品卡 </div> <div class=content> <div class=card_item data-cardid={{item.cardId}} data-cardcode={{item.cardCode}} v-for="item in cards" @click=cardConsume> <div class=card_itop> <div class=card_it1><span class=card_img><img :src=item.logo alt=""></span></div> <div class=card_it2>{{item.title}}</div> </div> <div class=card_ibtm> <div class=card_ib1>余额: <span class=col4>￥<em>{{item.amount}}</em></span></div> <div class=card_ib2>有效期至{{item.expireDate}}</div> </div> </div> <div class=not_card v-show=no_data> <p class=ncd_p1><span class=ico_nocard></span></p> <p class=ncd_p2>暂无可消费的电子卡</p> <p class=ncd_p3> <x-button type=primary @click=goBuy>购买电子卡</x-button> </p> </div> </div> <toast :show.sync=alert.show title=消息 button-text=知道了>{{alert.message}}</toast> <loading :show.sync=loading></loading> </div> '},312:function(e,t,o){var a,i;o(200),a=o(161),i=o(280),e.exports=a||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)}});