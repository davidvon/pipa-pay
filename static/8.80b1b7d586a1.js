webpackJsonp([8],{1:function(t,a){var s=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=s)},4:function(t,a,s){t.exports={"default":s(7),__esModule:!0}},6:function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={props:{type:{"default":"default"},disabled:{type:Boolean,"default":!1},mini:{type:Boolean,"default":!1},plain:{type:Boolean,"default":!1},text:String},computed:{classes:function(){return[{weui_btn_disabled:this.disabled,weui_btn_mini:this.mini},"weui_btn_"+this.type,this.plain?"weui_btn_plain_"+this.type:""]}}}},7:function(t,a,s){var e=s(1),d=e.JSON||(e.JSON={stringify:JSON.stringify});t.exports=function(t){return d.stringify.apply(d,arguments)}},10:function(t,a){t.exports=" <button class=weui_btn :class=classes :disabled=disabled> {{text}}<slot></slot> </button> "},11:function(t,a,s){var e,d;e=s(6),d=s(10),t.exports=e||{},t.exports.__esModule&&(t.exports=t.exports["default"]),d&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=d)},39:function(t,a,s){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}function d(t,a,s){p["default"].log("addCard","invoking wx:"+(0,c["default"])(t)),wx.addCard({cardList:t,success:function(t){p["default"].log("addCard","add card success:"+t+", json:"+(0,c["default"])(t.cardList)),a&&a(t.cardList)},cancel:function(t){s&&s()},fail:function(t){s&&s()}})}function o(t,a,s,e,o,i){t.$http.post(e+"weixin/card/add",{card_global_id:a,openid:s}).then(function(t){var s=t.data;if(0==s.result){var e=s.data,n=[];n.push({cardId:e.id,cardExt:'{"timestamp":"'+e.timestamp+'","signature":"'+e.signature+'"}'}),d(n,o,i)}else p["default"].log("wxAddCard","post add-card:"+a+" failed"),i&&i()},function(){p["default"].log("wxAddCard","post add-card:"+a+" exception"),i&&i()})}function i(t,a,s,e,o,i){t.$http.post(e+"weixin/cards/add",{orderId:a,openid:s}).then(function(t){var s=t.data;if(0==s.result){for(var e=s.data,n=[],r=0;r<e&&e.length;r++){var c=e[r];n.push({cardId:c.id,cardExt:'{"timestamp":"'+c.timestamp+'","signature":"'+c.signature+'"}'})}d(n,o,i)}else p["default"].log("wxAddCards","post add-cards order:"+a+" failed"),i&&i()},function(){p["default"].log("wxAddCards","post add-cards order:"+a+" exception"),i&&i()})}function n(t,a,s,e,d){p["default"].log("wxOpenCard","cardId:"+a+" code:"+s),wx.openCard({cardList:[{cardId:a,code:s}],success:function(t){var a=t.cardList;p["default"].log("wxOpenCard","card list:"+a),e&&e(a)},cancel:function(t){d&&d()},fail:function(t){d&&d()}})}Object.defineProperty(a,"__esModule",{value:!0});var r=s(4),c=e(r);a.wxAddCard=o,a.wxAddCards=i,a.wxOpenCard=n;var u=s(3),p=e(u)},126:function(t,a,s){"use strict";function e(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(a,"__esModule",{value:!0});var d=s(2),o=e(d),i=s(16),n=e(i),r=s(39);a["default"]={attached:function(){this.$root.navTitle="购买结果",this.$root.showHeader=!0},components:{XButton:s(11)},data:function(){return{order_id:"",buy_status:1,cards:{number:0,amount:0}}},ready:function(){var t=this;t.$dispatch("showLoading"),t.$http.post(o["default"].API_URL+"card/dispatch",{order_id:t.order_id}).then(function(a){t.$dispatch("hideLoading");var s=a.data;0==s.result?(t.cards.number=s.data.count,t.cards.amount=s.data.amount,t.buy_status=0):(t.buy_status=255,t.$dispatch("hideLoading"))},function(){t.buy_status=255,t.$dispatch("hideLoading")})},route:{data:function(t){this.openid=n["default"].wxOpenId,this.order_id=t.to.params.orderId}},methods:{clickMemCard:function(){if(0!=this.cards.number){var t=this;t.$dispatch("showLoading"),(0,r.wxAddCards)(t,t.order_id,t.openid,o["default"].API_URL,function(a){t.$dispatch("hideLoading"),console.log("wx.addCard:"+a),t.$route.router.replace({name:"memcards"})},function(){t.$dispatch("hideLoading")})}},goHome:function(){this.$route.router.replace({name:"home"})},goPayCards:function(){this.$route.router.replace({name:"paycards"})}}}},206:function(t,a){t.exports=' <div class=buy-result> <div class=pay_success v-show="buy_status==1"> <p class=top_icop><span class="ico_tip ico_success"></span></p> <p class=tips_p1>支付成功</p> <p class=tips_p2>正在为你分配礼品卡，请稍后…</p> </div> <div class=trade_success v-show="buy_status==0"> <p class=top_icop><span class="ico_tip ico_success"></span></p> <p class=tips_p1>购卡成功</p> <p class=tips_p2>你获得 <span class="col0 number">{{cards.number}}张</span> 面值 <span class="col0 amount">{{cards.amount}}元</span> 的礼品卡 </p> <p class=card_pbtn> <x-button type=primary @click=clickMemCard>转赠</x-button> <x-button @click=goPayCards>去支付</x-button> </p> </div> <div class=trade_fail v-show="buy_status==255"> <p class=top_icop><span class="ico_tip ico_fail"></span></p> <p class=tips_p1>购卡失败, 订单号:{{order_id}}</p> <p class=tips_p2>请致电4000-888-400联系客服人员进行处理</p> </div> </div> '},241:function(t,a,s){var e,d;e=s(126),d=s(206),t.exports=e||{},t.exports.__esModule&&(t.exports=t.exports["default"]),d&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=d)}});