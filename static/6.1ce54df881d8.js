webpackJsonp([6],{3:function(e,t){var a=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=a)},4:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{leftOptions:{type:Object,"default":function(){return{showBack:!0,backText:"Back",preventGoBack:!1}}},rightOptions:{type:Object,"default":function(){return{showMore:!1}}}},methods:{onClickBack:function(){this.leftOptions.preventGoBack?this.$emit("on-click-back"):history.back()}}}},5:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,'.vux-header{position:relative;padding:3px 0;box-sizing:border-box;background-color:#fff}.vux-header .vux-header-title,.vux-header h1{margin:0 88px;margin-left:100px;line-height:40px;text-align:center;height:40px;font-size:18px;font-weight:400;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#000}.vux-header .vux-header-title a,.vux-header .vux-header-title a:active,.vux-header h1 a,.vux-header h1 a:active{color:#fff}.vux-header .vux-header-left,.vux-header .vux-header-right{position:absolute;top:14px;display:block;font-size:14px;line-height:21px;color:#ccc}.vux-header .vux-header-left a,.vux-header .vux-header-left button,.vux-header .vux-header-right a,.vux-header .vux-header-right button{float:left;margin-right:8px;color:#000}.vux-header .vux-header-left a:active,.vux-header .vux-header-left button:active,.vux-header .vux-header-right a:active,.vux-header .vux-header-right button:active{opacity:.5}.vux-header .vux-header-left{left:18px}.vux-header .vux-header-left .vux-header-back{padding-left:16px}.vux-header .vux-header-left .vux-header-back:before{content:"";position:absolute;display:block;top:2px;left:0;width:12px;height:12px;border:1px solid #000;border-width:1px 0 0 1px;margin-left:3px;margin-top:1px;-webkit-transform:rotate(315deg);transform:rotate(315deg)}.vux-header .vux-header-right{right:15px}.vux-header .vux-header-right a,.vux-header .vux-header-right button{margin-left:8px;margin-right:0}.vux-header .vux-header-right .vux-header-more:after{content:"\\2022   \\2022   \\2022   ";font-size:16px}',""])},6:function(e,t,a){var o=a(5);"string"==typeof o&&(o=[[e.id,o,""]]);a(2)(o,{});o.locals&&(e.exports=o.locals)},7:function(e,t){e.exports=" <div class=vux-header> <div class=vux-header-left> <a class=vux-header-back @click.preventdefault v-show=leftOptions.showBack @click=onClickBack>{{leftOptions.backText}}</a> <slot name=left></slot> </div> <h1 class=vux-header-title><slot></slot></h1> <div class=vux-header-right> <a class=vux-header-more @click.preventdefault @click=\"$emit('on-click-more')\" v-if=rightOptions.showMore></a> <slot name=right></slot> </div> </div> "},8:function(e,t,a){var o,r;a(6),o=a(4),r=a(7),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},15:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{type:{"default":"default"},disabled:{type:Boolean,"default":!1},mini:{type:Boolean,"default":!1},plain:{type:Boolean,"default":!1},text:String},computed:{classes:function(){return[{weui_btn_disabled:this.disabled,weui_btn_mini:this.mini},"weui_btn_"+this.type,this.plain?"weui_btn_plain_"+this.type:""]}}}},18:function(e,t){e.exports=" <button class=weui_btn :class=classes :disabled=disabled> {{text}}<slot></slot> </button> "},19:function(e,t,a){var o,r;o=a(15),r=a(18),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},21:function(e,t,a){e.exports={"default":a(24),__esModule:!0}},24:function(e,t,a){var o=a(3),r=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},27:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(34),i=o(r);t["default"]={components:{Dialog:i["default"]},props:{show:{type:Boolean,"default":!1},title:{type:String,required:!0},buttonText:{type:String,"default":"OK"},maskTransition:{type:String,"default":"vux-fade"},dialogTransition:{type:String,"default":"vux-dialog"}},methods:{onHide:function(){this.show=!1}}}},28:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{show:{type:Boolean,"default":!1},maskTransition:{type:String,"default":"vux-fade"},dialogTransition:{type:String,"default":"vux-dialog"}},watch:{show:function(e){this.$emit(e?"on-show":"on-hide")}}}},31:function(e,t){e.exports=' <dialog class=weui_dialog_alert :show=show :mask-transition=maskTransition :dialog-transition=dialogTransition @on-hide="$emit(\'on-hide\')" @on-show="$emit(\'on-show\')"> <div class=weui_dialog_hd><strong class=weui_dialog_title>{{title}}</strong></div> <div class=weui_dialog_bd><slot></slot></div> <div class=weui_dialog_ft> <a href=javascript:; class="weui_btn_dialog primary" @click=onHide>{{buttonText}}</a> </div> </dialog> '},32:function(e,t){e.exports=" <div class=weui_dialog_alert v-show=show :transition=maskTransition> <div class=weui_mask></div> <div class=weui_dialog v-show=show :transition=dialogTransition> <slot></slot> </div> </div> "},33:function(e,t,a){var o,r;o=a(27),r=a(31),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},34:function(e,t,a){var o,r;o=a(28),r=a(32),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},45:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a,o,r,i){d["default"].log("onMenuShareAppMessage","title:"+t),wx&&wx.onMenuShareAppMessage({title:t,desc:a,link:e,imgUrl:o,success:function(){d["default"].log("onMenuShareAppMessage","success"),r&&r()},cancel:function(){i&&i()}})}function i(e,t,a,o,r,i){wx&&wx.onMenuShareTimeline({title:t,link:e,desc:a,imgUrl:o,success:function(){r&&r()},cancel:function(){i&&i()}})}function n(e,t,a){var o=p["default"].wxOpenId,n=p["default"].wxConfigStatus;if(!o||n)return d["default"].log("wxRegister","discarded, openid:"+o+", wxConfig status:"+n),void(t&&t());var s=location.href.split("#")[0];d["default"].log("wxRegister","register url:"+s),e.$http.post(u["default"].API_URL+"weixin/sign/jsapi",{url:s}).then(function(o){d["default"].log("wxRegister","jsapi response ok"),e.loading=!1,o&&o.data?(wx.config({debug:!1,appId:o.data.appId,timestamp:o.data.timestamp,nonceStr:o.data.nonceStr,signature:o.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","chooseImage","uploadImage","scanQRCode","openCard","addCard","chooseWXPay"]}),wx.ready(function(){d["default"].log("wxRegister","wx.config ok..."),p["default"].wxConfigEnable(),i(location.origin+location.pathname,u["default"].shareTitle,u["default"].shareDesc,u["default"].shareLogo),r(location.origin+location.pathname,u["default"].shareTitle,u["default"].shareDesc,u["default"].shareLogo),t&&t()}),wx.error(function(e){d["default"].log("wxRegister","wx config error:"+e.errMsg),a&&a()})):a&&a()},function(e){d["default"].err("wxRegister",e),a&&a()})}Object.defineProperty(t,"__esModule",{value:!0}),t.onMenuShareAppMessage=r,t.onMenuShareTimeline=i,t.wxRegister=n;var s=a(10),d=o(s),l=a(9),u=o(l),c=a(20),p=o(c)},76:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(77),i=o(r);t["default"]={mixins:[i["default"]],props:{required:{type:Boolean,"default":!0}},created:function(){this.handleChangeEvent=!1},computed:{dirty:function(){return!this.prisine},invalid:function(){return!this.valid}},methods:{setTouched:function(){this.touched=!0}},watch:{value:function(e){this.prisine===!0&&(this.prisine=!1),this.handleChangeEvent||this.$emit("change",e)}},data:function(){return{errors:{},prisine:!0,touched:!1,valid:!0}}}},77:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={created:function(){this.uuid=Math.random().toString(36).substring(3,8)}}},150:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(76),i=o(r);t["default"]={minxins:[i["default"]],props:{showCounter:{type:Boolean,"default":!0},max:Number,value:{type:String,"default":"",twoWay:!0},placeholder:{type:String,"default":""},rows:{type:Number,"default":3},cols:{type:Number,"default":30},height:Number},watch:{value:function(e){this.max&&this.value.length>this.max&&(this.value=e.slice(0,this.max)),this.$emit("on-change",this.value)}},computed:{count:function(){return this.value.length},textareaStyle:function(){if(this.height)return{height:this.height+"px"}}}}},156:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(21),i=o(r),n=a(9),s=o(n),d=a(45),l=a(20),u=o(l),c=a(10),p=o(c);t["default"]={components:{XHeader:a(8),XButton:a(19),XTextarea:a(301),Alert:a(33)},data:function(){return{cardId:"",cardCode:"",maskShow:!1,content:"小小卡片，浓浓情义",shareUrl:"",card:{sign:"",cardId:"",cardName:"",timestamp:""},alert:{type:"",message:"",show:!1,callback:null}}},route:{data:function(e){this.openid=u["default"].wxOpenId,this.cardId=e.to.params.cardId,this.cardCode=e.to.params.cardCode}},methods:{alertMsg:function(e,t){this.alert.message=e,this.alert.show=!0,this.alert.callback=t||function(){}},updateCardStatus:function(){var e=this;this.$http.post(s["default"].API_URL+"card/share",{openId:e.openid,sign:e.card.sign,cardId:e.cardId,cardCode:e.cardCode,timestamp:e.card.timestamp,content:e.content}).then(function(t){var a=t.data;0==a.result&&e.$route.router.go({name:"gift_share_result",params:{cardId:e.cardId,cardCode:e.cardCode}})})},onShare:function(){var e=this;e.shareUrl="http://"+location.host+"/#!/gift/receive/"+e.card.sign,p["default"].log("CardGiftShare","onShare url:"+e.shareUrl+" card:"+e.card.cardName+" content:"+e.content+" logo:"+e.card.logo),(0,d.onMenuShareAppMessage)(e.shareUrl,"点击领取"+e.card.cardName,e.content,e.card.logo,function(){p["default"].log("CardGiftShare"," menu share ok"),e.maskShow=!1,e.updateCardStatus()},function(){e.maskShow=!1,p["default"].log("CardGiftShare","menu share error")})}},ready:function(){var e=this;this.$http.post(s["default"].API_URL+"card/share/check",{openId:e.openid,cardId:e.cardId,cardCode:e.cardCode}).then(function(t){var a=t.data;return p["default"].log("CardGiftShare","card sharing check error:"+(0,i["default"])(a)),0!=a.result?void e.alertMsg("该卡已不存在",function(){e.$route.router.go({name:"home"})}):void(a.status>2?e.alertMsg("该卡已转赠",function(){e.$route.router.go({name:"home"})}):(p["default"].log("CardGiftShare","card sharing check ok"),e.card=a.card,e.onShare()))},function(){p["default"].log("CardGiftShare","card sharing check exception")})}}},184:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,".card .vux-masker{width:100%;box-shadow:0 4px 4px rgba(0,0,0,.2)}.card .vux-masker .content{padding:15px}.card .card-title{padding:10px 0}.card .card-logo{height:33px}.card .card-property{padding:25px 0}.card .card-money,.card .card-valid{color:grey;font-size:14px}.card .card-valid{margin-left:0!important;text-align:right}.card .img{padding-bottom:125px;display:block;position:relative;width:100%;background-size:cover;background-position:50%;cursor:pointer;border-radius:10px}.card .money{color:red;font-size:15px}.card .card-item{width:90%;position:relative}.card .icon-card-select{margin:-30px;width:25px}.card .title{color:#fff;font-size:17px}",""])},200:function(e,t,a){var o=a(184);"string"==typeof o&&(o=[[e.id,o,""]]);a(2)(o,{});o.locals&&(e.exports=o.locals)},271:function(e,t){e.exports=' <div class=weui_cell> <div class="weui_cell_bd weui_cell_primary"> <textarea class=weui_textarea placeholder={{placeholder}} :rows=rows :cols=cols v-model=value :style=textareaStyle :maxlength=max></textarea> <div class=weui_textarea_counter v-show="showCounter && max"><span>{{count}}</span>/{{max}}</div> </div> </div> '},276:function(e,t){e.exports=' <div class="wx-cards card gift"> <x-header :left-options=\'{showBack:true, backText:"返回"}\'>赠送卡 </x-header> <div class=container data-js=""> <div class=content> <p class=donation_top>请输入转赠留言</p> <div class="donation_text border b_top_btm"> <x-textarea :max=30 :placeholder=content :value.sync=content></x-textarea> </div> <p class=donation_btn> <x-button type=primary @click="maskShow=true">转赠</x-button> </p> <p class=donation_p1>温馨提示</p> <p class=donation_p2><span>1.</span> <span>转赠后，礼品卡即处于“转赠中”状态。待好友领取后，即与转赠者解绑，并与被转赠者建立绑定关系。</span></p> <p class=donation_p2><span>2.</span> <span>若超过24小时未领取。则过期不可再领取。同时礼品卡从“转赠中”状态恢复正常。</span></p> </div> <div class="s_wraper share_id" v-show=maskShow @click="maskShow=false"> <div class=pop_otop> <p class=box_share><span class=ico_share></span></p> </div> </div> </div> <alert :show.sync=alert.show title="" button-text=知道了 @on-hide=alert.callback>{{alert.message}}</alert> </div> '},301:function(e,t,a){var o,r;o=a(150),r=a(271),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)},307:function(e,t,a){var o,r;a(200),o=a(156),r=a(276),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),r&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=r)}});